<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sepetiniz</title>
    <style>
        .card { border: 1px solid #ddd; padding: 10px; margin: 10px; width: 700px; }
        .card-img-top { width: 200px; height: 200px; }
        .btn { padding: 10px; background-color: #f00; color: #fff; cursor: pointer; border: none; margin: 10px 0; }

        /* Özel alert stili */
        .custom-alert {
            display: none;
            position: fixed;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            background-color: green;
            color: #fff;
            padding: 20px;
            border: 2px solid green;
            border-radius: 5px;
            width: 30%;
			height:20px;
            text-align: center;
            font-size: 16px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            z-index: 9999;  /* Üstte görünmesi için yüksek z-index */
        }
		
		.btn{ 
			background-color: orange; color: #fff; 
		}
		
		.btn-sil {
		    background-color: #fff; /* Normalde beyaz */
		    color: #000; /* Yazı rengi siyah */
		    border: 2px solid #ffa500; /* Turuncu sınır */
		    cursor: pointer;
		    padding: 10px;
		    margin: 10px 0;
		    border-radius: 5px; /* Köşeleri yuvarlatmak isterseniz */
		}

		.btn-sil:hover {
		    background-color: #ffa500; /* Hover sırasında turuncu */
		    color: #fff; /* Yazı rengi beyaz */
		}


    </style>
</head>
<body>
    <h1>Sepetiniz</h1>
    <div id="cart-container"></div>
    <h3>Toplam Fiyat: <span id="total-price"></span> TL</h3>
    <button class="btn" onclick="clearCart()">Tümünü Sil</button>

    <!-- Özel alert kutusu -->
    <div id="alert" class="custom-alert">Sepetiniz boşaltıldı!</div>

    <script>
		
		document.addEventListener('DOMContentLoaded', (event) => {
		    const cartContainer = document.getElementById('cart-container');
		    const totalPriceElement = document.getElementById('total-price');
		    let cart = JSON.parse(localStorage.getItem('cart')) || [];
		    let totalPrice = 0;

		    cart.forEach((item, index) => {
		        const productCard = document.createElement('div');
		        productCard.className = 'card';
		        productCard.innerHTML = `
		            <img src="${item.imageUrl}" class="card-img-top" alt="${item.description}">
		            <div class="card-description">${item.description}</div>
		            <p class="price">${item.price} TL</p>
		            <button class="btn-sil" onclick="removeFromCart(${index})">Sil</button>
		        `;
		        cartContainer.appendChild(productCard);

		        // Fiyatı düzgün bir şekilde işlemek
		        const price = parseFloat(item.price.replace(',', ''));
		        totalPrice += price + 0.001; // Her ürün için 0.001 TL ekleme
		    });

		    // Toplam fiyatı en yakın ondalık basamağa yuvarlamak ve 100 ile çarpmak
		    totalPrice = Math.round(totalPrice * 100);

		    // Toplam fiyatı formatlamak
		    let formattedTotalPrice = (totalPrice / 100).toLocaleString('tr-TR', { minimumFractionDigits: 3, maximumFractionDigits: 3 });
		    formattedTotalPrice = formattedTotalPrice.replace('.', ',');
		    totalPriceElement.textContent = `${formattedTotalPrice.replace(/,$/, '')}`;
		});

		function removeFromCart(index) {
		    let cart = JSON.parse(localStorage.getItem('cart')) || [];
		    cart.splice(index, 1); // Belirli indeksteki ürünü kaldır
		    localStorage.setItem('cart', JSON.stringify(cart));
		    location.reload(); // Sayfayı yeniden yükleyerek güncel durumu göster
		}

		function clearCart() {
		    localStorage.removeItem('cart');
		    const cartContainer = document.getElementById('cart-container');
		    const totalPriceElement = document.getElementById('total-price');
		    cartContainer.innerHTML = '';
		    totalPriceElement.textContent = '0,00 TL';

		    // Özel alerti göster
		    const alertBox = document.getElementById('alert');
		    alertBox.style.display = 'block';

		    // 3 saniye sonra alerti gizle
		    setTimeout(() => {
		        alertBox.style.display = 'none';
		    }, 3000);
		}


    </script>
</body>
</html>















